<aside>
ğŸ’¡
æœ¬æ–‡ä»¥3000å¹³åŠå…¬å®¤ç½‘ç»œéœ€æ±‚ä¸ºç¤ºä¾‹ï¼Œè¯¦ç»†ä»‹ç»ä»è§„åˆ’åˆ°å®æ–½çš„å…·ä½“ç»†èŠ‚ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚
</aside>

# ä¸€. åŠå…¬å®¤ç½‘ç»œè®¾è®¡è¯´æ˜

## 1. ç½‘ç»œæ¶æ„è®¾è®¡

### 1.1 ä¸‰å±‚ç½‘ç»œæ¶æ„

é‡‡ç”¨ç»å…¸çš„ä¸‰å±‚ç½‘ç»œæ¶æ„ï¼š

* **æ ¸å¿ƒå±‚ï¼ˆCore Layerï¼‰**ï¼šé«˜é€Ÿæ•°æ®è½¬å‘ï¼Œè¿æ¥æ±‡èšå±‚
* **æ±‡èšå±‚ï¼ˆDistribution Layerï¼‰**ï¼šç­–ç•¥æ§åˆ¶ï¼Œè¿æ¥æ ¸å¿ƒå±‚å’Œæ¥å…¥å±‚
* **æ¥å…¥å±‚ï¼ˆAccess Layerï¼‰**ï¼šç”¨æˆ·æ¥å…¥ï¼Œè¿æ¥ç»ˆç«¯è®¾å¤‡

### 1.2 ç½‘ç»œæ‹“æ‰‘ç‰¹ç‚¹

* æ ¸å¿ƒå±‚åŒæœºçƒ­å¤‡ï¼Œä¿è¯é«˜å¯ç”¨æ€§
* æ±‡èšå±‚æ¯å±‚éƒ¨ç½²2å°ï¼Œæä¾›å†—ä½™
* æ¥å…¥å±‚æ˜Ÿå‹è¿æ¥åˆ°æ±‡èšå±‚
* æ— çº¿ç½‘ç»œç‹¬ç«‹éƒ¨ç½²ï¼Œç»Ÿä¸€ç®¡ç†

## 2. VLANè§„åˆ’

### 2.1 VLANåˆ†é…è¡¨


| **VLAN ID** | **VLANåç§°** | **ç½‘æ®µ**        | **ç”¨é€”**   | **ç½‘å…³**     |
| ----------- | ------------ | --------------- | ---------- | ------------ |
| 10          | Management   | 192.168.10.0/24 | è®¾å¤‡ç®¡ç†   | 192.168.10.1 |
| 100         | Office-1F    | 10.1.100.0/24   | ä¸€æ¥¼åŠå…¬åŒº | 10.1.100.1   |
| 200         | Office-2F    | 10.1.200.0/24   | äºŒæ¥¼åŠå…¬åŒº | 10.1.200.1   |
| 300         | Office-3F    | 10.1.300.0/24   | ä¸‰æ¥¼åŠå…¬åŒº | 10.1.300.1   |
| 110         | Meeting-1F   | 10.1.110.0/24   | ä¸€æ¥¼ä¼šè®®å®¤ | 10.1.110.1   |
| 210         | Meeting-2F   | 10.1.210.0/24   | äºŒæ¥¼ä¼šè®®å®¤ | 10.1.210.1   |
| 310         | Meeting-3F   | 10.1.310.0/24   | ä¸‰æ¥¼ä¼šè®®å®¤ | 10.1.310.1   |
| 50          | Server       | 10.1.50.0/24    | æœåŠ¡å™¨åŒº   | 10.1.50.1    |
| 60          | DMZ          | 10.1.60.0/24    | DMZåŒºåŸŸ    | 10.1.60.1    |
| 400         | WiFi-Guest   | 10.1.400.0/24   | è®¿å®¢æ— çº¿   | 10.1.400.1   |
| 500         | WiFi-Office  | 10.1.500.0/24   | åŠå…¬æ— çº¿   | 10.1.500.1   |
| 999         | Native       | -               | åŸç”ŸVLAN   | -            |

### 2.2 VLANè®¾è®¡åŸåˆ™

1. **å®‰å…¨éš”ç¦»**ï¼šä¸åŒéƒ¨é—¨/åŠŸèƒ½åŒºåŸŸç‹¬ç«‹VLAN
2. **ä¾¿äºç®¡ç†**ï¼šVLAN IDä¸æ¥¼å±‚/åŠŸèƒ½å¯¹åº”
3. **æ‰©å±•æ€§**ï¼šé¢„ç•™VLAN IDç©ºé—´
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šå¹¿æ’­åŸŸæ§åˆ¶åœ¨åˆç†èŒƒå›´

## 3. IPåœ°å€è§„åˆ’

### 3.1 åœ°å€åˆ†é…åŸåˆ™

* **ç§æœ‰åœ°å€**ï¼šä½¿ç”¨RFC1918ç§æœ‰åœ°å€æ®µ
* **å±‚æ¬¡åŒ–**ï¼šæŒ‰æ¥¼å±‚å’ŒåŠŸèƒ½åˆ†é…
* **é¢„ç•™ç©ºé—´**ï¼šæ¯ä¸ªç½‘æ®µé¢„ç•™30%åœ°å€
* **ç®¡ç†åœ°å€**ï¼šè®¾å¤‡ç®¡ç†ä½¿ç”¨ç‹¬ç«‹ç½‘æ®µ

### 3.2 è®¾å¤‡IPåœ°å€åˆ†é…

### æ ¸å¿ƒè®¾å¤‡


| **è®¾å¤‡** | **æ¥å£** | **IPåœ°å€**   | **ç”¨é€”** |
| -------- | -------- | ------------ | -------- |
| Core-SW1 | VLANIF10 | 192.168.10.2 | ç®¡ç†åœ°å€ |
| Core-SW2 | VLANIF10 | 192.168.10.3 | ç®¡ç†åœ°å€ |
| Router1  | GE0/0/0  | å…¬ç½‘IP       | å¤–ç½‘æ¥å£ |
| Router1  | GE0/0/1  | 10.1.1.1     | å†…ç½‘æ¥å£ |
| Router2  | GE0/0/0  | å…¬ç½‘IP       | å¤–ç½‘æ¥å£ |
| Router2  | GE0/0/1  | 10.1.1.2     | å†…ç½‘æ¥å£ |

### æ±‡èšäº¤æ¢æœº


| **è®¾å¤‡**   | **IPåœ°å€**    | **ä½ç½®**  |
| ---------- | ------------- | --------- |
| Agg-SW1-1F | 192.168.10.11 | ä¸€æ¥¼æ±‡èš1 |
| Agg-SW2-1F | 192.168.10.12 | ä¸€æ¥¼æ±‡èš2 |
| Agg-SW1-2F | 192.168.10.21 | äºŒæ¥¼æ±‡èš1 |
| Agg-SW2-2F | 192.168.10.22 | äºŒæ¥¼æ±‡èš2 |
| Agg-SW1-3F | 192.168.10.31 | ä¸‰æ¥¼æ±‡èš1 |
| Agg-SW2-3F | 192.168.10.32 | ä¸‰æ¥¼æ±‡èš2 |

### 3.3 DHCPåœ°å€æ± 

æ¯ä¸ªVLANé…ç½®DHCPåœ°å€æ± ï¼Œè‡ªåŠ¨åˆ†é…IPåœ°å€ï¼š

* åœ°å€èŒƒå›´ï¼šç½‘æ®µçš„50%-90%
* ç§ŸæœŸï¼š8å°æ—¶ï¼ˆåŠå…¬æ—¶é—´ï¼‰
* DNSæœåŠ¡å™¨ï¼š114.114.114.114, 8.8.8.8
* åŸŸåï¼šcompany.local

## 4. è·¯ç”±è®¾è®¡

### 4.1 è·¯ç”±åè®®

* **å†…éƒ¨è·¯ç”±**ï¼šOSPFï¼ˆOpen Shortest Path Firstï¼‰
* **å¤–éƒ¨è·¯ç”±**ï¼šBGPï¼ˆBorder Gateway Protocolï¼‰
* **é»˜è®¤è·¯ç”±**ï¼šæŒ‡å‘å‡ºå£è·¯ç”±å™¨

### 4.2 OSPFåŒºåŸŸè§„åˆ’

* **Area 0**ï¼šéª¨å¹²åŒºåŸŸï¼ŒåŒ…å«æ ¸å¿ƒè®¾å¤‡
* **Area 1**ï¼šåŠå…¬åŒºåŸŸ
* **Area 2**ï¼šæœåŠ¡å™¨åŒºåŸŸ
* **Area 3**ï¼šDMZåŒºåŸŸ

## 5. å®‰å…¨è®¾è®¡

### 5.1 ç½‘ç»œå®‰å…¨ç­–ç•¥

1. **è¾¹ç•Œé˜²æŠ¤**ï¼šéƒ¨ç½²é˜²ç«å¢™ï¼Œæ§åˆ¶å—åŒ—å‘æµé‡
2. **å†…ç½‘éš”ç¦»**ï¼šVLANéš”ç¦»ï¼ŒACLè®¿é—®æ§åˆ¶
3. **æ— çº¿å®‰å…¨**ï¼šWPA3åŠ å¯†ï¼ŒMACåœ°å€è®¤è¯
4. **è®¾å¤‡å®‰å…¨**ï¼šSSHç®¡ç†ï¼ŒSNMP v3

### 5.2 è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰

* ç¦æ­¢åŠå…¬ç½‘è®¿é—®æœåŠ¡å™¨ç®¡ç†ç«¯å£
* å…è®¸ç‰¹å®šç®¡ç†å‘˜è®¿é—®è®¾å¤‡ç®¡ç†VLAN
* é™åˆ¶è®¿å®¢ç½‘ç»œè®¿é—®å†…ç½‘èµ„æº
* é˜²æ­¢VLANé—´éæˆæƒè®¿é—®

## 6. QoSè®¾è®¡

### 6.1 æµé‡åˆ†ç±»

* **è¯­éŸ³æµé‡**ï¼šæœ€é«˜ä¼˜å…ˆçº§ï¼ˆEFï¼‰
* **è§†é¢‘æµé‡**ï¼šé«˜ä¼˜å…ˆçº§ï¼ˆAF41ï¼‰
* **å…³é”®ä¸šåŠ¡**ï¼šä¸­ç­‰ä¼˜å…ˆçº§ï¼ˆAF31ï¼‰
* **æ™®é€šæ•°æ®**ï¼šé»˜è®¤ä¼˜å…ˆçº§ï¼ˆBEï¼‰

### 6.2 å¸¦å®½ä¿è¯

* è¯­éŸ³æµé‡ï¼šä¿è¯å¸¦å®½ï¼Œä½å»¶è¿Ÿ
* è§†é¢‘ä¼šè®®ï¼šä¿è¯å¸¦å®½ï¼Œä½æŠ–åŠ¨
* å…³é”®ä¸šåŠ¡ï¼šå¸¦å®½ä¿è¯50%
* æ™®é€šä¸Šç½‘ï¼šå‰©ä½™å¸¦å®½

## 7. ç½‘ç»œç®¡ç†

### 7.1 ç›‘æ§æŒ‡æ ‡

* **è®¾å¤‡çŠ¶æ€**ï¼šCPUã€å†…å­˜ã€æ¸©åº¦
* **æ¥å£çŠ¶æ€**ï¼šå¸¦å®½åˆ©ç”¨ç‡ã€é”™è¯¯åŒ…
* **ç½‘ç»œæ€§èƒ½**ï¼šå»¶è¿Ÿã€ä¸¢åŒ…ç‡ã€ååé‡
* **å®‰å…¨äº‹ä»¶**ï¼šå…¥ä¾µæ£€æµ‹ã€å¼‚å¸¸æµé‡

### 7.2 ç®¡ç†å·¥å…·

* **åä¸ºeSight**ï¼šç»Ÿä¸€ç½‘ç®¡å¹³å°
* **SNMPç›‘æ§**ï¼šå®æ—¶çŠ¶æ€ç›‘æ§
* **Syslogæ—¥å¿—**ï¼šé›†ä¸­æ—¥å¿—ç®¡ç†
* **NetStreamåˆ†æ**ï¼šæµé‡åˆ†æ

## 8. å®¹ç¾å¤‡ä»½

### 8.1 è®¾å¤‡å†—ä½™

* æ ¸å¿ƒäº¤æ¢æœºï¼šåŒæœºçƒ­å¤‡
* å‡ºå£è·¯ç”±å™¨ï¼šåŒæœºçƒ­å¤‡
* é˜²ç«å¢™ï¼šåŒæœºçƒ­å¤‡
* æ— çº¿æ§åˆ¶å™¨ï¼šåŒæœºçƒ­å¤‡

### 8.2 é“¾è·¯å†—ä½™

* æ ¸å¿ƒåˆ°æ±‡èšï¼šåŒé“¾è·¯èšåˆ
* æ±‡èšåˆ°æ¥å…¥ï¼šåŒä¸Šè”ï¼ˆéƒ¨åˆ†å…³é”®åŒºåŸŸï¼‰
* å¤–ç½‘é“¾è·¯ï¼šåŒè¿è¥å•†æ¥å…¥

## 9. æ‰©å±•è§„åˆ’

### 9.1 ç«¯å£æ‰©å±•

* æ¥å…¥å±‚é¢„ç•™30%ç«¯å£
* æ±‡èšå±‚é¢„ç•™40%ç«¯å£
* æ ¸å¿ƒå±‚é¢„ç•™50%ç«¯å£

### 9.2 å¸¦å®½æ‰©å±•

* æ ¸å¿ƒéª¨å¹²ï¼šæ”¯æŒ40Gæ‰©å±•åˆ°100G
* æ±‡èšä¸Šè”ï¼šæ”¯æŒä¸‡å…†æ‰©å±•
* æ¥å…¥ä¸‹è”ï¼šå…¨åƒå…†éƒ¨ç½²

### 9.3 åŠŸèƒ½æ‰©å±•

* é¢„ç•™æœåŠ¡å™¨æœºæŸœç©ºé—´
* æ”¯æŒäº‘ç½‘èåˆ
* é¢„ç•™IoTè®¾å¤‡æ¥å…¥
* æ”¯æŒSD-WANéƒ¨ç½²

# äºŒ. é‡‡è´­è®¾å¤‡è¯´æ˜

## åŠå…¬å®¤åŸºæœ¬ä¿¡æ¯

* æ€»é¢ç§¯ï¼š3000å¹³ç±³
* é¢„è®¡å·¥ä½ï¼š300ä¸ª
* æ¥¼å±‚ï¼š3å±‚ï¼Œæ¯å±‚1000å¹³ç±³
* ä¼šè®®å®¤ï¼š15ä¸ª
* æœåŠ¡å™¨æœºæˆ¿ï¼š1ä¸ªï¼ˆ50å¹³ç±³ï¼‰

## æ ¸å¿ƒè®¾å¤‡æ¸…å•

### 1. æ ¸å¿ƒäº¤æ¢æœº


| **è®¾å¤‡å‹å·**  | **æ•°é‡** | **è§„æ ¼**            | **ç”¨é€”**         |
| ------------- | -------- | ------------------- | ---------------- |
| åä¸ºS12700E-6 | 2å°      | 48ç«¯å£ä¸‡å…†+4ç«¯å£40G | æ ¸å¿ƒå±‚ï¼ŒåŒæœºçƒ­å¤‡ |

### 2. æ±‡èšäº¤æ¢æœº


| **è®¾å¤‡å‹å·**        | **æ•°é‡** | **è§„æ ¼**                 | **ç”¨é€”**        |
| ------------------- | -------- | ------------------------ | --------------- |
| åä¸ºS5735-L48T4S-A1 | 6å°      | 48ç«¯å£åƒå…†+4ç«¯å£ä¸‡å…†SFP+ | æ¯å±‚2å°ï¼Œæ±‡èšå±‚ |

### 3. æ¥å…¥äº¤æ¢æœº


| **è®¾å¤‡å‹å·**          | **æ•°é‡** | **è§„æ ¼**                   | **ç”¨é€”**            |
| --------------------- | -------- | -------------------------- | ------------------- |
| åä¸ºS2750-28TP-PWR-EI | 20å°     | 24ç«¯å£åƒå…†PoE+4ç«¯å£åƒå…†SFP | æ¥å…¥å±‚ï¼Œæ”¯æŒPoEä¾›ç”µ |
| åä¸ºS2750-52P-EI      | 10å°     | 48ç«¯å£åƒå…†+4ç«¯å£åƒå…†SFP    | é«˜å¯†åº¦æ¥å…¥          |

### 4. è·¯ç”±å™¨


| **è®¾å¤‡å‹å·** | **æ•°é‡** | **è§„æ ¼** | **ç”¨é€”**   |
| ------------ | -------- | -------- | ---------- |
| åä¸ºAR6300-S | 2å°      | åŒæœºçƒ­å¤‡ | å‡ºå£è·¯ç”±å™¨ |

### 5. é˜²ç«å¢™


| **è®¾å¤‡å‹å·** | **æ•°é‡** | **è§„æ ¼**     | **ç”¨é€”**     |
| ------------ | -------- | ------------ | ------------ |
| åä¸ºUSG6650  | 2å°      | ååé‡20Gbps | è¾¹ç•Œå®‰å…¨é˜²æŠ¤ |

### 6. æ— çº¿è®¾å¤‡


| **è®¾å¤‡å‹å·** | **æ•°é‡** | **è§„æ ¼**      | **ç”¨é€”**             |
| ------------ | -------- | ------------- | -------------------- |
| åä¸ºAC6605   | 2å°      | æ”¯æŒ1024ä¸ªAP  | æ— çº¿æ§åˆ¶å™¨ï¼ŒåŒæœºçƒ­å¤‡ |
| åä¸ºAP7060DN | 60å°     | Wi-Fi 6ï¼ŒåŒé¢‘ | å®¤å†…æ— çº¿æ¥å…¥ç‚¹       |

### 7. æœåŠ¡å™¨è®¾å¤‡


| **è®¾å¤‡å‹å·**              | **æ•°é‡** | **è§„æ ¼**     | **ç”¨é€”**   |
| ------------------------- | -------- | ------------ | ---------- |
| åä¸ºFusionServer 2288H V5 | 4å°      | 2Uæœºæ¶æœåŠ¡å™¨ | åº”ç”¨æœåŠ¡å™¨ |
| åä¸ºOceanStor 2600 V5     | 1å¥—      | å­˜å‚¨é˜µåˆ—     | æ•°æ®å­˜å‚¨   |

### 8. ç½‘ç»œç®¡ç†


| **è®¾å¤‡å‹å·** | **æ•°é‡** | **è§„æ ¼** | **ç”¨é€”**     |
| ------------ | -------- | -------- | ------------ |
| åä¸ºeSight   | 1å¥—      | ç½‘ç®¡è½¯ä»¶ | ç»Ÿä¸€ç½‘ç»œç®¡ç† |

## çº¿ç¼†åŠé…ä»¶

### å…‰çº¤çº¿ç¼†

* ä¸‡å…†å¤šæ¨¡å…‰çº¤ï¼š200ç±³
* åƒå…†å¤šæ¨¡å…‰çº¤ï¼š500ç±³
* ä¸‡å…†å•æ¨¡å…‰çº¤ï¼š100ç±³

### ç½‘çº¿

* å…­ç±»ç½‘çº¿ï¼š15000ç±³
* è¶…å…­ç±»ç½‘çº¿ï¼š5000ç±³

### æœºæŸœåŠé…ä»¶

* 42Uæ ‡å‡†æœºæŸœï¼š8ä¸ª
* 24Uå£æŒ‚æœºæŸœï¼š15ä¸ª
* PDUç”µæºï¼š30ä¸ª
* ç†çº¿å™¨ï¼š100ä¸ª

## è®¾å¤‡ç‰¹ç‚¹

1. **é«˜å¯é æ€§**ï¼šæ ¸å¿ƒè®¾å¤‡åŒæœºçƒ­å¤‡ï¼Œ99.99%å¯ç”¨æ€§
2. **é«˜æ€§èƒ½**ï¼šä¸‡å…†éª¨å¹²ï¼Œåƒå…†åˆ°æ¡Œé¢
3. **PoEä¾›ç”µ**ï¼šæ”¯æŒIPç”µè¯ã€æ— çº¿APä¾›ç”µ
4. **ç»¿è‰²èŠ‚èƒ½**ï¼šåä¸ºè®¾å¤‡åŠŸè€—ä¼˜åŒ–
5. **æ˜“æ‰©å±•**ï¼šé¢„ç•™30%ç«¯å£æ‰©å±•ç©ºé—´

# ä¸‰. ä¸»è¦ç½‘ç»œè®¾å¤‡é…ç½®éƒ¨ç½²

### é…ç½®åŸåˆ™

1. **è‡ªä¸‹è€Œä¸Š**ï¼šä»æ ¸å¿ƒè®¾å¤‡å¼€å§‹ï¼Œé€æ­¥å‘æ¥å…¥è®¾å¤‡é…ç½®
2. **å…ˆåŸºç¡€åé«˜çº§**ï¼šå…ˆé…ç½®åŸºæœ¬è¿é€šæ€§ï¼Œå†é…ç½®é«˜çº§åŠŸèƒ½
3. **åˆ†é˜¶æ®µéªŒè¯**ï¼šæ¯ä¸ªé˜¶æ®µå®Œæˆåè¿›è¡Œè¿é€šæ€§æµ‹è¯•
4. **å¤‡ä»½é…ç½®**ï¼šæ¯æ¬¡é‡è¦é…ç½®ååŠæ—¶ä¿å­˜

## ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒè®¾å¤‡åŸºç¡€é…ç½®

### 1.1 æ ¸å¿ƒäº¤æ¢æœº1é…ç½®ï¼ˆCore-Switch-1ï¼‰

### è®¾å¤‡ä¿¡æ¯

* **è®¾å¤‡å‹å·**ï¼šåä¸º S12700E-6
* **ç®¡ç†IP**ï¼š192.168.10.11/24
* **è§’è‰²**ï¼šä¸»æ ¸å¿ƒäº¤æ¢æœº

### é…ç½®æ­¥éª¤

**æ­¥éª¤1ï¼šåˆå§‹åŒ–è®¾å¤‡**

```cli
# é€šè¿‡Consoleå£è¿æ¥è®¾å¤‡
# é¦–æ¬¡å¯åŠ¨ï¼Œè¿›å…¥ç³»ç»Ÿè§†å›¾
<Huawei>system-view
[Huawei]sysname Core-Switch-1
[Core-Switch-1]clock timezone BJ add 08:00:00
```

**æ­¥éª¤2ï¼šåˆ›å»ºç®¡ç†ç”¨æˆ·**

```cli
# åˆ›å»ºæœ¬åœ°ç”¨æˆ·
[Core-Switch-1]aaa
[Core-Switch-1-aaa]local-user admin password cipher Huawei@123
[Core-Switch-1-aaa]local-user admin privilege level 15
[Core-Switch-1-aaa]local-user admin service-type ssh telnet terminal
[Core-Switch-1-aaa]quit

# é…ç½®ç”¨æˆ·ç•Œé¢
[Core-Switch-1]user-interface vty 0 4
[Core-Switch-1-ui-vty0-4]authentication-mode aaa
[Core-Switch-1-ui-vty0-4]protocol inbound ssh
[Core-Switch-1-ui-vty0-4]quit
```

**æ­¥éª¤3ï¼šé…ç½®SSHæœåŠ¡**

```cli
# ç”ŸæˆRSAå¯†é’¥
[Core-Switch-1]rsa local-key-pair create
# å¯ç”¨SSHæœåŠ¡
[Core-Switch-1]ssh server enable
[Core-Switch-1]stelnet server enable
```

**æ­¥éª¤4ï¼šåˆ›å»ºç®¡ç†VLAN**

```cli
# åˆ›å»ºç®¡ç†VLAN
[Core-Switch-1]vlan 10
[Core-Switch-1-vlan10]description Management
[Core-Switch-1-vlan10]quit

# é…ç½®ç®¡ç†æ¥å£
[Core-Switch-1]interface vlanif 10
[Core-Switch-1-Vlanif10]ip address 192.168.10.11 24
[Core-Switch-1-Vlanif10]quit
```

**æ­¥éª¤5ï¼šé…ç½®é»˜è®¤è·¯ç”±ï¼ˆä¸´æ—¶ï¼‰**

```cli
# é…ç½®ä¸´æ—¶é»˜è®¤è·¯ç”±ç”¨äºç®¡ç†
[Core-Switch-1]ip route-static 0.0.0.0 0.0.0.0 192.168.10.1
```

**æ­¥éª¤6ï¼šä¿å­˜é…ç½®**

```cli
[Core-Switch-1]save
# ç¡®è®¤ä¿å­˜
The current configuration will be written to the device.
Are you sure to continue?[Y/N]y
```

### 1.2 æ ¸å¿ƒäº¤æ¢æœº2é…ç½®ï¼ˆCore-Switch-2ï¼‰

### è®¾å¤‡ä¿¡æ¯

* **è®¾å¤‡å‹å·**ï¼šåä¸º S12700E-6
* **ç®¡ç†IP**ï¼š192.168.10.12/24
* **è§’è‰²**ï¼šå¤‡æ ¸å¿ƒäº¤æ¢æœº

### é…ç½®æ­¥éª¤

**é‡å¤æ ¸å¿ƒäº¤æ¢æœº1çš„æ­¥éª¤1-6ï¼Œæ³¨æ„ä»¥ä¸‹å·®å¼‚ï¼š**

```cli
# è®¾å¤‡åç§°
[Huawei]sysname Core-Switch-2

# ç®¡ç†IPåœ°å€
[Core-Switch-2]interface vlanif 10
[Core-Switch-2-Vlanif10]ip address 192.168.10.12 24
```

### 1.3 éªŒè¯æ ¸å¿ƒäº¤æ¢æœºåŸºç¡€è¿é€šæ€§

```cli
# åœ¨Core-Switch-1ä¸Šæµ‹è¯•
[Core-Switch-1]ping 192.168.10.12
# åº”è¯¥èƒ½å¤Ÿpingé€šCore-Switch-2

# æµ‹è¯•SSHè¿æ¥
[Core-Switch-1]ssh client 192.168.10.12
```

## ç¬¬äºŒé˜¶æ®µï¼šæ ¸å¿ƒè®¾å¤‡å®Œæ•´é…ç½®

### 2.1 æ ¸å¿ƒäº¤æ¢æœº1å®Œæ•´VLANé…ç½®

```cli
# åˆ›å»ºæ‰€æœ‰ä¸šåŠ¡VLAN
[Core-Switch-1]vlan batch 100 to 102 200 to 202 300 400 500 600

# é…ç½®VLANæè¿°
[Core-Switch-1]vlan 100
[Core-Switch-1-vlan100]description Office-1F
[Core-Switch-1-vlan100]quit

[Core-Switch-1]vlan 101
[Core-Switch-1-vlan101]description Office-2F
[Core-Switch-1-vlan101]quit

[Core-Switch-1]vlan 102
[Core-Switch-1-vlan102]description Office-3F
[Core-Switch-1-vlan102]quit

[Core-Switch-1]vlan 200
[Core-Switch-1-vlan200]description Meeting-1F
[Core-Switch-1-vlan200]quit

[Core-Switch-1]vlan 201
[Core-Switch-1-vlan201]description Meeting-2F
[Core-Switch-1-vlan201]quit

[Core-Switch-1]vlan 202
[Core-Switch-1-vlan202]description Meeting-3F
[Core-Switch-1-vlan202]quit

[Core-Switch-1]vlan 300
[Core-Switch-1-vlan300]description Server
[Core-Switch-1-vlan300]quit

[Core-Switch-1]vlan 400
[Core-Switch-1-vlan400]description DMZ
[Core-Switch-1-vlan400]quit

[Core-Switch-1]vlan 500
[Core-Switch-1-vlan500]description Guest-Wireless
[Core-Switch-1-vlan500]quit

[Core-Switch-1]vlan 600
[Core-Switch-1-vlan600]description Office-Wireless
[Core-Switch-1-vlan600]quit
```

### 2.2 é…ç½®VLANIFæ¥å£å’ŒDHCPä¸­ç»§

```cli
# é…ç½®åŠå…¬åŒºVLANIFæ¥å£
[Core-Switch-1]interface vlanif 100
[Core-Switch-1-Vlanif100]ip address 192.168.100.252 24
[Core-Switch-1-Vlanif100]dhcp select relay
[Core-Switch-1-Vlanif100]dhcp relay server-ip 192.168.10.100
[Core-Switch-1-Vlanif100]quit

[Core-Switch-1]interface vlanif 101
[Core-Switch-1-Vlanif101]ip address 192.168.101.252 24
[Core-Switch-1-Vlanif101]dhcp select relay
[Core-Switch-1-Vlanif101]dhcp relay server-ip 192.168.10.100
[Core-Switch-1-Vlanif101]quit

[Core-Switch-1]interface vlanif 102
[Core-Switch-1-Vlanif102]ip address 192.168.102.252 24
[Core-Switch-1-Vlanif102]dhcp select relay
[Core-Switch-1-Vlanif102]dhcp relay server-ip 192.168.10.100
[Core-Switch-1-Vlanif102]quit

# é…ç½®ä¼šè®®å®¤VLANIFæ¥å£
[Core-Switch-1]interface vlanif 200
[Core-Switch-1-Vlanif200]ip address 192.168.200.252 24
[Core-Switch-1-Vlanif200]dhcp select relay
[Core-Switch-1-Vlanif200]dhcp relay server-ip 192.168.10.100
[Core-Switch-1-Vlanif200]quit

[Core-Switch-1]interface vlanif 201
[Core-Switch-1-Vlanif201]ip address 192.168.201.252 24
[Core-Switch-1-Vlanif201]dhcp select relay
[Core-Switch-1-Vlanif201]dhcp relay server-ip 192.168.10.100
[Core-Switch-1-Vlanif201]quit

[Core-Switch-1]interface vlanif 202
[Core-Switch-1-Vlanif202]ip address 192.168.202.252 24
[Core-Switch-1-Vlanif202]dhcp select relay
[Core-Switch-1-Vlanif202]dhcp relay server-ip 192.168.10.100
[Core-Switch-1-Vlanif202]quit

# é…ç½®æœåŠ¡å™¨å’ŒDMZ VLANIFæ¥å£
[Core-Switch-1]interface vlanif 300
[Core-Switch-1-Vlanif300]ip address 192.168.30.252 24
[Core-Switch-1-Vlanif300]quit

[Core-Switch-1]interface vlanif 400
[Core-Switch-1-Vlanif400]ip address 192.168.40.252 24
[Core-Switch-1-Vlanif400]quit

# é…ç½®æ— çº¿VLANIFæ¥å£
[Core-Switch-1]interface vlanif 500
[Core-Switch-1-Vlanif500]ip address 192.168.50.252 24
[Core-Switch-1-Vlanif500]dhcp select relay
[Core-Switch-1-Vlanif500]dhcp relay server-ip 192.168.10.100
[Core-Switch-1-Vlanif500]quit

[Core-Switch-1]interface vlanif 600
[Core-Switch-1-Vlanif600]ip address 192.168.60.252 24
[Core-Switch-1-Vlanif600]dhcp select relay
[Core-Switch-1-Vlanif600]dhcp relay server-ip 192.168.10.100
[Core-Switch-1-Vlanif600]quit
```

### 2.3 é…ç½®ç‰©ç†æ¥å£

```cli
# é…ç½®è¿æ¥æ ¸å¿ƒäº¤æ¢æœº2çš„æ¥å£ï¼ˆé“¾è·¯èšåˆï¼‰
[Core-Switch-1]interface eth-trunk 1
[Core-Switch-1-Eth-Trunk1]description Link-to-Core-Switch-2
[Core-Switch-1-Eth-Trunk1]port link-type trunk
[Core-Switch-1-Eth-Trunk1]port trunk allow-pass vlan all
[Core-Switch-1-Eth-Trunk1]quit

[Core-Switch-1]interface 10ge 1/0/1
[Core-Switch-1-10GE1/0/1]eth-trunk 1
[Core-Switch-1-10GE1/0/1]quit

[Core-Switch-1]interface 10ge 1/0/2
[Core-Switch-1-10GE1/0/2]eth-trunk 1
[Core-Switch-1-10GE1/0/2]quit

# é…ç½®è¿æ¥å‡ºå£è·¯ç”±å™¨çš„æ¥å£
[Core-Switch-1]interface 10ge 1/0/3
[Core-Switch-1-10GE1/0/3]description Link-to-Router-1
[Core-Switch-1-10GE1/0/3]port link-type trunk
[Core-Switch-1-10GE1/0/3]port trunk allow-pass vlan 10 300 400
[Core-Switch-1-10GE1/0/3]quit

# é…ç½®è¿æ¥æ±‡èšäº¤æ¢æœºçš„æ¥å£
[Core-Switch-1]interface 10ge 1/0/4
[Core-Switch-1-10GE1/0/4]description Link-to-Agg-Switch-1F-1
[Core-Switch-1-10GE1/0/4]port link-type trunk
[Core-Switch-1-10GE1/0/4]port trunk allow-pass vlan 10 100 200 500 600
[Core-Switch-1-10GE1/0/4]quit

[Core-Switch-1]interface 10ge 1/0/5
[Core-Switch-1-10GE1/0/5]description Link-to-Agg-Switch-1F-2
[Core-Switch-1-10GE1/0/5]port link-type trunk
[Core-Switch-1-10GE1/0/5]port trunk allow-pass vlan 10 100 200 500 600
[Core-Switch-1-10GE1/0/5]quit

# ç»§ç»­é…ç½®å…¶ä»–æ±‡èšäº¤æ¢æœºè¿æ¥...
```

### 2.4 é…ç½®OSPFè·¯ç”±åè®®

```cli
# å¯ç”¨OSPF
[Core-Switch-1]ospf 1 router-id 192.168.10.11
[Core-Switch-1-ospf-1]area 0
[Core-Switch-1-ospf-1-area-0.0.0.0]network 192.168.10.0 0.0.0.255
[Core-Switch-1-ospf-1-area-0.0.0.0]network 192.168.100.0 0.0.0.255
[Core-Switch-1-ospf-1-area-0.0.0.0]network 192.168.101.0 0.0.0.255
[Core-Switch-1-ospf-1-area-0.0.0.0]network 192.168.102.0 0.0.0.255
[Core-Switch-1-ospf-1-area-0.0.0.0]network 192.168.200.0 0.0.0.255
[Core-Switch-1-ospf-1-area-0.0.0.0]network 192.168.201.0 0.0.0.255
[Core-Switch-1-ospf-1-area-0.0.0.0]network 192.168.202.0 0.0.0.255
[Core-Switch-1-ospf-1-area-0.0.0.0]network 192.168.30.0 0.0.0.255
[Core-Switch-1-ospf-1-area-0.0.0.0]network 192.168.40.0 0.0.0.255
[Core-Switch-1-ospf-1-area-0.0.0.0]network 192.168.50.0 0.0.0.255
[Core-Switch-1-ospf-1-area-0.0.0.0]network 192.168.60.0 0.0.0.255
[Core-Switch-1-ospf-1-area-0.0.0.0]quit
[Core-Switch-1-ospf-1]quit
```

### 2.5 é…ç½®VRRPï¼ˆç½‘å…³å†—ä½™ï¼‰

```cli
# åœ¨å„VLANIFæ¥å£é…ç½®VRRP
[Core-Switch-1]interface vlanif 100
[Core-Switch-1-Vlanif100]vrrp vrid 100 virtual-ip 192.168.100.254
[Core-Switch-1-Vlanif100]vrrp vrid 100 priority 120
[Core-Switch-1-Vlanif100]vrrp vrid 100 preempt-mode timer delay 20
[Core-Switch-1-Vlanif100]quit

[Core-Switch-1]interface vlanif 101
[Core-Switch-1-Vlanif101]vrrp vrid 101 virtual-ip 192.168.101.254
[Core-Switch-1-Vlanif101]vrrp vrid 101 priority 120
[Core-Switch-1-Vlanif101]vrrp vrid 101 preempt-mode timer delay 20
[Core-Switch-1-Vlanif101]quit

# ç»§ç»­é…ç½®å…¶ä»–VLANçš„VRRP...
```

### 2.6 ä¿å­˜æ ¸å¿ƒäº¤æ¢æœº1é…ç½®

```cli
[Core-Switch-1]save
```

### 2.7 æ ¸å¿ƒäº¤æ¢æœº2é…ç½®

**é‡å¤2.1-2.6çš„é…ç½®ï¼Œæ³¨æ„ä»¥ä¸‹å·®å¼‚ï¼š**

```cli
# OSPF Router ID
[Core-Switch-2]ospf 1 router-id 192.168.10.12

# VRRPä¼˜å…ˆçº§ï¼ˆå¤‡è®¾å¤‡ä¼˜å…ˆçº§è¾ƒä½ï¼‰
[Core-Switch-2]interface vlanif 100
[Core-Switch-2-Vlanif100]vrrp vrid 100 virtual-ip 192.168.100.254
[Core-Switch-2-Vlanif100]vrrp vrid 100 priority 100
[Core-Switch-2-Vlanif100]quit
```

## ç¬¬ä¸‰é˜¶æ®µï¼šè·¯ç”±å™¨é…ç½®

### 3.1 å‡ºå£è·¯ç”±å™¨é…ç½®ï¼ˆRouter-1ï¼‰

### è®¾å¤‡ä¿¡æ¯

* **è®¾å¤‡å‹å·**ï¼šåä¸º AR6300-S
* **ç®¡ç†IP**ï¼š192.168.10.1/24
* **è§’è‰²**ï¼šä¸»å‡ºå£è·¯ç”±å™¨

### é…ç½®æ­¥éª¤

**æ­¥éª¤1ï¼šåŸºç¡€é…ç½®**

```cli
<Huawei>system-view
[Huawei]sysname Router-1
[Router-1]clock timezone BJ add 08:00:00

# åˆ›å»ºç®¡ç†ç”¨æˆ·
[Router-1]aaa
[Router-1-aaa]local-user admin password cipher Huawei@123
[Router-1-aaa]local-user admin privilege level 15
[Router-1-aaa]local-user admin service-type ssh telnet terminal
[Router-1-aaa]quit

# é…ç½®SSH
[Router-1]user-interface vty 0 4
[Router-1-ui-vty0-4]authentication-mode aaa
[Router-1-ui-vty0-4]protocol inbound ssh
[Router-1-ui-vty0-4]quit

[Router-1]rsa local-key-pair create
[Router-1]ssh server enable
[Router-1]stelnet server enable
```

**æ­¥éª¤2ï¼šé…ç½®æ¥å£**

```cli
# é…ç½®ç®¡ç†æ¥å£
[Router-1]interface gigabitethernet 0/0/0
[Router-1-GigabitEthernet0/0/0]description Management
[Router-1-GigabitEthernet0/0/0]ip address 192.168.10.1 24
[Router-1-GigabitEthernet0/0/0]quit

# é…ç½®å¤–ç½‘æ¥å£ï¼ˆè¿æ¥ISPï¼‰
[Router-1]interface gigabitethernet 0/0/1
[Router-1-GigabitEthernet0/0/1]description WAN-to-ISP
[Router-1-GigabitEthernet0/0/1]ip address 202.96.128.100 30
[Router-1-GigabitEthernet0/0/1]quit

# é…ç½®å†…ç½‘æ¥å£ï¼ˆè¿æ¥æ ¸å¿ƒäº¤æ¢æœºï¼‰
[Router-1]interface gigabitethernet 0/0/2
[Router-1-GigabitEthernet0/0/2]description LAN-to-Core
[Router-1-GigabitEthernet0/0/2]quit

# åˆ›å»ºå­æ¥å£
[Router-1]interface gigabitethernet 0/0/2.10
[Router-1-GigabitEthernet0/0/2.10]description Management-VLAN
[Router-1-GigabitEthernet0/0/2.10]dot1q termination vid 10
[Router-1-GigabitEthernet0/0/2.10]ip address 192.168.10.2 24
[Router-1-GigabitEthernet0/0/2.10]arp broadcast enable
[Router-1-GigabitEthernet0/0/2.10]quit

[Router-1]interface gigabitethernet 0/0/2.300
[Router-1-GigabitEthernet0/0/2.300]description Server-VLAN
[Router-1-GigabitEthernet0/0/2.300]dot1q termination vid 300
[Router-1-GigabitEthernet0/0/2.300]ip address 192.168.30.1 24
[Router-1-GigabitEthernet0/0/2.300]arp broadcast enable
[Router-1-GigabitEthernet0/0/2.300]quit

[Router-1]interface gigabitethernet 0/0/2.400
[Router-1-GigabitEthernet0/0/2.400]description DMZ-VLAN
[Router-1-GigabitEthernet0/0/2.400]dot1q termination vid 400
[Router-1-GigabitEthernet0/0/2.400]ip address 192.168.40.1 24
[Router-1-GigabitEthernet0/0/2.400]arp broadcast enable
[Router-1-GigabitEthernet0/0/2.400]quit
```

**æ­¥éª¤3ï¼šé…ç½®è·¯ç”±**

```cli
# é…ç½®é»˜è®¤è·¯ç”±
[Router-1]ip route-static 0.0.0.0 0.0.0.0 202.96.128.101

# é…ç½®OSPF
[Router-1]ospf 1 router-id 192.168.10.1
[Router-1-ospf-1]default-route-advertise always
[Router-1-ospf-1]area 0
[Router-1-ospf-1-area-0.0.0.0]network 192.168.10.0 0.0.0.255
[Router-1-ospf-1-area-0.0.0.0]network 192.168.30.0 0.0.0.255
[Router-1-ospf-1-area-0.0.0.0]network 192.168.40.0 0.0.0.255
[Router-1-ospf-1-area-0.0.0.0]quit
[Router-1-ospf-1]quit
```

**æ­¥éª¤4ï¼šé…ç½®NAT**

```cli
# åˆ›å»ºACLç”¨äºNAT
[Router-1]acl number 2000
[Router-1-acl-basic-2000]rule 5 permit source 192.168.0.0 0.0.255.255
[Router-1-acl-basic-2000]quit

# é…ç½®NAT
[Router-1]nat address-group 1 202.96.128.100 202.96.128.100
[Router-1]interface gigabitethernet 0/0/1
[Router-1-GigabitEthernet0/0/1]nat outbound 2000 address-group 1
[Router-1-GigabitEthernet0/0/1]quit

# é…ç½®æœåŠ¡å™¨ç«¯å£æ˜ å°„ï¼ˆç¤ºä¾‹ï¼‰
[Router-1]nat server protocol tcp global 202.96.128.100 80 inside 192.168.30.10 80
[Router-1]nat server protocol tcp global 202.96.128.100 443 inside 192.168.30.10 443
```

**æ­¥éª¤5ï¼šä¿å­˜é…ç½®**

```cli
[Router-1]save
```

## ç¬¬å››é˜¶æ®µï¼šé˜²ç«å¢™é…ç½®

### 4.1 é˜²ç«å¢™é…ç½®ï¼ˆFirewall-1ï¼‰

### è®¾å¤‡ä¿¡æ¯

* **è®¾å¤‡å‹å·**ï¼šåä¸º USG6650
* **ç®¡ç†IP**ï¼š192.168.10.20/24
* **éƒ¨ç½²æ¨¡å¼**ï¼šé€æ˜æ¨¡å¼

### é…ç½®æ­¥éª¤

**æ­¥éª¤1ï¼šåŸºç¡€é…ç½®**

```cli
<USG6650>system-view
[USG6650]sysname Firewall-1
[Firewall-1]clock timezone BJ add 08:00:00

# åˆ›å»ºç®¡ç†ç”¨æˆ·
[Firewall-1]aaa
[Firewall-1-aaa]local-user admin password cipher Huawei@123
[Firewall-1-aaa]local-user admin privilege level 15
[Firewall-1-aaa]local-user admin service-type ssh web terminal
[Firewall-1-aaa]quit

# é…ç½®SSHå’ŒWebç®¡ç†
[Firewall-1]user-interface vty 0 4
[Firewall-1-ui-vty0-4]authentication-mode aaa
[Firewall-1-ui-vty0-4]protocol inbound ssh
[Firewall-1-ui-vty0-4]quit

[Firewall-1]rsa local-key-pair create
[Firewall-1]ssh server enable
[Firewall-1]stelnet server enable

[Firewall-1]web-manager enable
[Firewall-1]web-manager port 8443
```

**æ­¥éª¤2ï¼šé…ç½®æ¥å£**

```cli
# é…ç½®ç®¡ç†æ¥å£
[Firewall-1]interface gigabitethernet 0/0/0
[Firewall-1-GigabitEthernet0/0/0]description Management
[Firewall-1-GigabitEthernet0/0/0]ip address 192.168.10.20 24
[Firewall-1-GigabitEthernet0/0/0]service-manage ping permit
[Firewall-1-GigabitEthernet0/0/0]service-manage ssh permit
[Firewall-1-GigabitEthernet0/0/0]service-manage https permit
[Firewall-1-GigabitEthernet0/0/0]quit

# é…ç½®å¤–ç½‘æ¥å£
[Firewall-1]interface gigabitethernet 1/0/0
[Firewall-1-GigabitEthernet1/0/0]description WAN-Interface
[Firewall-1-GigabitEthernet1/0/0]ip address 202.96.128.102 30
[Firewall-1-GigabitEthernet1/0/0]quit

# é…ç½®å†…ç½‘æ¥å£
[Firewall-1]interface gigabitethernet 1/0/1
[Firewall-1-GigabitEthernet1/0/1]description LAN-Interface
[Firewall-1-GigabitEthernet1/0/1]ip address 192.168.1.1 24
[Firewall-1-GigabitEthernet1/0/1]quit

# é…ç½®DMZæ¥å£
[Firewall-1]interface gigabitethernet 1/0/2
[Firewall-1-GigabitEthernet1/0/2]description DMZ-Interface
[Firewall-1-GigabitEthernet1/0/2]ip address 192.168.40.1 24
[Firewall-1-GigabitEthernet1/0/2]quit
```

**æ­¥éª¤3ï¼šé…ç½®å®‰å…¨åŒºåŸŸ**

```cli
# åˆ›å»ºå®‰å…¨åŒºåŸŸ
[Firewall-1]firewall zone trust
[Firewall-1-zone-trust]add interface gigabitethernet 1/0/1
[Firewall-1-zone-trust]quit

[Firewall-1]firewall zone untrust
[Firewall-1-zone-untrust]add interface gigabitethernet 1/0/0
[Firewall-1-zone-untrust]quit

[Firewall-1]firewall zone dmz
[Firewall-1-zone-dmz]add interface gigabitethernet 1/0/2
[Firewall-1-zone-dmz]quit

[Firewall-1]firewall zone local
[Firewall-1-zone-local]add interface gigabitethernet 0/0/0
[Firewall-1-zone-local]quit
```

**æ­¥éª¤4ï¼šé…ç½®å®‰å…¨ç­–ç•¥**

```cli
# å†…ç½‘è®¿é—®å¤–ç½‘ç­–ç•¥
[Firewall-1]security-policy
[Firewall-1-policy-security]rule name trust_to_untrust
[Firewall-1-policy-security-rule-trust_to_untrust]source-zone trust
[Firewall-1-policy-security-rule-trust_to_untrust]destination-zone untrust
[Firewall-1-policy-security-rule-trust_to_untrust]action permit
[Firewall-1-policy-security-rule-trust_to_untrust]quit

# å¤–ç½‘è®¿é—®DMZç­–ç•¥
[Firewall-1-policy-security]rule name untrust_to_dmz
[Firewall-1-policy-security-rule-untrust_to_dmz]source-zone untrust
[Firewall-1-policy-security-rule-untrust_to_dmz]destination-zone dmz
[Firewall-1-policy-security-rule-untrust_to_dmz]destination-address 192.168.40.10 mask 255.255.255.255
[Firewall-1-policy-security-rule-untrust_to_dmz]service http https
[Firewall-1-policy-security-rule-untrust_to_dmz]action permit
[Firewall-1-policy-security-rule-untrust_to_dmz]quit

# å†…ç½‘è®¿é—®DMZç­–ç•¥
[Firewall-1-policy-security]rule name trust_to_dmz
[Firewall-1-policy-security-rule-trust_to_dmz]source-zone trust
[Firewall-1-policy-security-rule-trust_to_dmz]destination-zone dmz
[Firewall-1-policy-security-rule-trust_to_dmz]action permit
[Firewall-1-policy-security-rule-trust_to_dmz]quit

[Firewall-1-policy-security]quit
```

**æ­¥éª¤5ï¼šä¿å­˜é…ç½®**

```cli
[Firewall-1]save
```

## ç¬¬äº”é˜¶æ®µï¼šæ±‡èšäº¤æ¢æœºé…ç½®

### 5.1 ä¸€æ¥¼æ±‡èšäº¤æ¢æœºé…ç½®ï¼ˆAgg-Switch-1F-1ï¼‰

### è®¾å¤‡ä¿¡æ¯

* **è®¾å¤‡å‹å·**ï¼šåä¸º S5735-L48T4S-A1
* **ç®¡ç†IP**ï¼š192.168.10.21/24
* **è§’è‰²**ï¼šä¸€æ¥¼æ±‡èšäº¤æ¢æœº1

### é…ç½®æ­¥éª¤

**æ­¥éª¤1ï¼šåŸºç¡€é…ç½®**

```cli
<Huawei>system-view
[Huawei]sysname Agg-Switch-1F-1
[Agg-Switch-1F-1]clock timezone BJ add 08:00:00

# åˆ›å»ºç®¡ç†ç”¨æˆ·
[Agg-Switch-1F-1]aaa
[Agg-Switch-1F-1-aaa]local-user admin password cipher Huawei@123
[Agg-Switch-1F-1-aaa]local-user admin privilege level 15
[Agg-Switch-1F-1-aaa]local-user admin service-type ssh telnet terminal
[Agg-Switch-1F-1-aaa]quit

# é…ç½®SSH
[Agg-Switch-1F-1]user-interface vty 0 4
[Agg-Switch-1F-1-ui-vty0-4]authentication-mode aaa
[Agg-Switch-1F-1-ui-vty0-4]protocol inbound ssh
[Agg-Switch-1F-1-ui-vty0-4]quit

[Agg-Switch-1F-1]rsa local-key-pair create
[Agg-Switch-1F-1]ssh server enable
[Agg-Switch-1F-1]stelnet server enable
```

**æ­¥éª¤2ï¼šåˆ›å»ºVLAN**

```cli
# åˆ›å»ºç›¸å…³VLAN
[Agg-Switch-1F-1]vlan batch 10 100 200 500 600

# é…ç½®VLANæè¿°
[Agg-Switch-1F-1]vlan 10
[Agg-Switch-1F-1-vlan10]description Management
[Agg-Switch-1F-1-vlan10]quit

[Agg-Switch-1F-1]vlan 100
[Agg-Switch-1F-1-vlan100]description Office-1F
[Agg-Switch-1F-1-vlan100]quit

[Agg-Switch-1F-1]vlan 200
[Agg-Switch-1F-1-vlan200]description Meeting-1F
[Agg-Switch-1F-1-vlan200]quit

[Agg-Switch-1F-1]vlan 500
[Agg-Switch-1F-1-vlan500]description Guest-Wireless
[Agg-Switch-1F-1-vlan500]quit

[Agg-Switch-1F-1]vlan 600
[Agg-Switch-1F-1-vlan600]description Office-Wireless
[Agg-Switch-1F-1-vlan600]quit
```

**æ­¥éª¤3ï¼šé…ç½®ç®¡ç†æ¥å£**

```cli
[Agg-Switch-1F-1]interface vlanif 10
[Agg-Switch-1F-1-Vlanif10]ip address 192.168.10.21 24
[Agg-Switch-1F-1-Vlanif10]quit
```

**æ­¥éª¤4ï¼šé…ç½®ä¸Šè”æ¥å£ï¼ˆè¿æ¥æ ¸å¿ƒäº¤æ¢æœºï¼‰**

```cli
# é…ç½®ä¸Šè”æ¥å£1ï¼ˆè¿æ¥Core-Switch-1ï¼‰
[Agg-Switch-1F-1]interface gigabitethernet 0/0/49
[Agg-Switch-1F-1-GigabitEthernet0/0/49]description Uplink-to-Core-Switch-1
[Agg-Switch-1F-1-GigabitEthernet0/0/49]port link-type trunk
[Agg-Switch-1F-1-GigabitEthernet0/0/49]port trunk allow-pass vlan 10 100 200 500 600
[Agg-Switch-1F-1-GigabitEthernet0/0/49]quit

# é…ç½®ä¸Šè”æ¥å£2ï¼ˆè¿æ¥Core-Switch-2ï¼‰
[Agg-Switch-1F-1]interface gigabitethernet 0/0/50
[Agg-Switch-1F-1-GigabitEthernet0/0/50]description Uplink-to-Core-Switch-2
[Agg-Switch-1F-1-GigabitEthernet0/0/50]port link-type trunk
[Agg-Switch-1F-1-GigabitEthernet0/0/50]port trunk allow-pass vlan 10 100 200 500 600
[Agg-Switch-1F-1-GigabitEthernet0/0/50]quit
```

**æ­¥éª¤5ï¼šé…ç½®ä¸‹è”æ¥å£ï¼ˆè¿æ¥æ¥å…¥äº¤æ¢æœºï¼‰**

```cli
# é…ç½®è¿æ¥æ¥å…¥äº¤æ¢æœºçš„æ¥å£
[Agg-Switch-1F-1]interface gigabitethernet 0/0/1
[Agg-Switch-1F-1-GigabitEthernet0/0/1]description Link-to-Access-Switch-1F-Office-1
[Agg-Switch-1F-1-GigabitEthernet0/0/1]port link-type trunk
[Agg-Switch-1F-1-GigabitEthernet0/0/1]port trunk allow-pass vlan 10 100
[Agg-Switch-1F-1-GigabitEthernet0/0/1]quit

[Agg-Switch-1F-1]interface gigabitethernet 0/0/2
[Agg-Switch-1F-1-GigabitEthernet0/0/2]description Link-to-Access-Switch-1F-Office-2
[Agg-Switch-1F-1-GigabitEthernet0/0/2]port link-type trunk
[Agg-Switch-1F-1-GigabitEthernet0/0/2]port trunk allow-pass vlan 10 100
[Agg-Switch-1F-1-GigabitEthernet0/0/2]quit

[Agg-Switch-1F-1]interface gigabitethernet 0/0/3
[Agg-Switch-1F-1-GigabitEthernet0/0/3]description Link-to-Access-Switch-1F-Meeting
[Agg-Switch-1F-1-GigabitEthernet0/0/3]port link-type trunk
[Agg-Switch-1F-1-GigabitEthernet0/0/3]port trunk allow-pass vlan 10 200
[Agg-Switch-1F-1-GigabitEthernet0/0/3]quit
```

**æ­¥éª¤6ï¼šé…ç½®STP**

```cli
# å¯ç”¨STP
[Agg-Switch-1F-1]stp enable
[Agg-Switch-1F-1]stp mode rstp
[Agg-Switch-1F-1]stp priority 4096
```

**æ­¥éª¤7ï¼šé…ç½®OSPF**

```cli
[Agg-Switch-1F-1]ospf 1 router-id 192.168.10.21
[Agg-Switch-1F-1-ospf-1]area 0
[Agg-Switch-1F-1-ospf-1-area-0.0.0.0]network 192.168.10.0 0.0.0.255
[Agg-Switch-1F-1-ospf-1-area-0.0.0.0]quit
[Agg-Switch-1F-1-ospf-1]quit
```

**æ­¥éª¤8ï¼šä¿å­˜é…ç½®**

```cli
[Agg-Switch-1F-1]save
```

## ç¬¬å…­é˜¶æ®µï¼šæ¥å…¥äº¤æ¢æœºé…ç½®

### 6.1 ä¸€æ¥¼åŠå…¬åŒºæ¥å…¥äº¤æ¢æœºé…ç½®ï¼ˆAccess-Switch-1F-Office-1ï¼‰

### è®¾å¤‡ä¿¡æ¯

* **è®¾å¤‡å‹å·**ï¼šåä¸º S2750-28TP-PWR-EI
* **ç®¡ç†IP**ï¼š192.168.10.31/24
* **è§’è‰²**ï¼šä¸€æ¥¼åŠå…¬åŒºæ¥å…¥äº¤æ¢æœº1

### é…ç½®æ­¥éª¤

**æ­¥éª¤1ï¼šåŸºç¡€é…ç½®**

```cli
<Huawei>system-view
[Huawei]sysname Access-Switch-1F-Office-1
[Access-Switch-1F-Office-1]clock timezone BJ add 08:00:00

# åˆ›å»ºç®¡ç†ç”¨æˆ·
[Access-Switch-1F-Office-1]aaa
[Access-Switch-1F-Office-1-aaa]local-user admin password cipher Huawei@123
[Access-Switch-1F-Office-1-aaa]local-user admin privilege level 15
[Access-Switch-1F-Office-1-aaa]local-user admin service-type ssh telnet terminal
[Access-Switch-1F-Office-1-aaa]quit

# é…ç½®SSH
[Access-Switch-1F-Office-1]user-interface vty 0 4
[Access-Switch-1F-Office-1-ui-vty0-4]authentication-mode aaa
[Access-Switch-1F-Office-1-ui-vty0-4]protocol inbound ssh
[Access-Switch-1F-Office-1-ui-vty0-4]quit

[Access-Switch-1F-Office-1]rsa local-key-pair create
[Access-Switch-1F-Office-1]ssh server enable
[Access-Switch-1F-Office-1]stelnet server enable
```

**æ­¥éª¤2ï¼šåˆ›å»ºVLAN**

```cli
[Access-Switch-1F-Office-1]vlan batch 10 100

[Access-Switch-1F-Office-1]vlan 10
[Access-Switch-1F-Office-1-vlan10]description Management
[Access-Switch-1F-Office-1-vlan10]quit

[Access-Switch-1F-Office-1]vlan 100
[Access-Switch-1F-Office-1-vlan100]description Office-1F
[Access-Switch-1F-Office-1-vlan100]quit
```

**æ­¥éª¤3ï¼šé…ç½®ç®¡ç†æ¥å£**

```cli
[Access-Switch-1F-Office-1]interface vlanif 10
[Access-Switch-1F-Office-1-Vlanif10]ip address 192.168.10.31 24
[Access-Switch-1F-Office-1-Vlanif10]quit
```

**æ­¥éª¤4ï¼šé…ç½®ä¸Šè”æ¥å£**

```cli
[Access-Switch-1F-Office-1]interface gigabitethernet 0/0/25
[Access-Switch-1F-Office-1-GigabitEthernet0/0/25]description Uplink-to-Agg-Switch-1F-1
[Access-Switch-1F-Office-1-GigabitEthernet0/0/25]port link-type trunk
[Access-Switch-1F-Office-1-GigabitEthernet0/0/25]port trunk allow-pass vlan 10 100
[Access-Switch-1F-Office-1-GigabitEthernet0/0/25]quit

[Access-Switch-1F-Office-1]interface gigabitethernet 0/0/26
[Access-Switch-1F-Office-1-GigabitEthernet0/0/26]description Uplink-to-Agg-Switch-1F-2
[Access-Switch-1F-Office-1-GigabitEthernet0/0/26]port link-type trunk
[Access-Switch-1F-Office-1-GigabitEthernet0/0/26]port trunk allow-pass vlan 10 100
[Access-Switch-1F-Office-1-GigabitEthernet0/0/26]quit
```

**æ­¥éª¤5ï¼šé…ç½®ç”¨æˆ·æ¥å…¥ç«¯å£**

```cli
# æ‰¹é‡é…ç½®ç”¨æˆ·ç«¯å£
[Access-Switch-1F-Office-1]port-group group-member ethernet 0/0/1 to ethernet 0/0/24
[Access-Switch-1F-Office-1-port-group]port link-type access
[Access-Switch-1F-Office-1-port-group]port default vlan 100
[Access-Switch-1F-Office-1-port-group]poe enable
[Access-Switch-1F-Office-1-port-group]port-security enable
[Access-Switch-1F-Office-1-port-group]port-security max-mac-num 3
[Access-Switch-1F-Office-1-port-group]quit

# å•ç‹¬é…ç½®ç‰¹æ®Šç«¯å£ï¼ˆå¦‚æ‰“å°æœºç«¯å£ï¼‰
[Access-Switch-1F-Office-1]interface ethernet 0/0/24
[Access-Switch-1F-Office-1-Ethernet0/0/24]description Printer-1F-Office-1
[Access-Switch-1F-Office-1-Ethernet0/0/24]port-security max-mac-num 1
[Access-Switch-1F-Office-1-Ethernet0/0/24]quit
```

**æ­¥éª¤6ï¼šé…ç½®STPå’Œå…¶ä»–åŠŸèƒ½**

```cli
# å¯ç”¨STP
[Access-Switch-1F-Office-1]stp enable
[Access-Switch-1F-Office-1]stp mode rstp

# é…ç½®ç¯è·¯æ£€æµ‹
[Access-Switch-1F-Office-1]loopback-detection enable
[Access-Switch-1F-Office-1]interface range ethernet 0/0/1 to ethernet 0/0/24
[Access-Switch-1F-Office-1-if-range]loopback-detection enable
[Access-Switch-1F-Office-1-if-range]loopback-detection action block
[Access-Switch-1F-Office-1-if-range]quit

# é…ç½®DHCP Snooping
[Access-Switch-1F-Office-1]dhcp snooping enable
[Access-Switch-1F-Office-1]dhcp snooping binding enable
[Access-Switch-1F-Office-1]interface vlan 100
[Access-Switch-1F-Office-1-Vlanif100]dhcp snooping enable
[Access-Switch-1F-Office-1-Vlanif100]quit

# é…ç½®ä¸Šè”å£ä¸ºä¿¡ä»»ç«¯å£
[Access-Switch-1F-Office-1]interface gigabitethernet 0/0/25
[Access-Switch-1F-Office-1-GigabitEthernet0/0/25]dhcp snooping trusted
[Access-Switch-1F-Office-1-GigabitEthernet0/0/25]quit

[Access-Switch-1F-Office-1]interface gigabitethernet 0/0/26
[Access-Switch-1F-Office-1-GigabitEthernet0/0/26]dhcp snooping trusted
[Access-Switch-1F-Office-1-GigabitEthernet0/0/26]quit
```

**æ­¥éª¤7ï¼šä¿å­˜é…ç½®**

```cli
[Access-Switch-1F-Office-1]save
```

## ç¬¬ä¸ƒé˜¶æ®µï¼šæ— çº¿æ§åˆ¶å™¨é…ç½®

### 7.1 æ— çº¿æ§åˆ¶å™¨é…ç½®ï¼ˆWireless-Controller-1ï¼‰

### è®¾å¤‡ä¿¡æ¯

* **è®¾å¤‡å‹å·**ï¼šåä¸º AC6605
* **ç®¡ç†IP**ï¼š192.168.10.50/24
* **è§’è‰²**ï¼šä¸»æ— çº¿æ§åˆ¶å™¨

### é…ç½®æ­¥éª¤

**æ­¥éª¤1ï¼šåŸºç¡€é…ç½®**

```cli
<AC6605>system-view
[AC6605]sysname Wireless-Controller-1
[Wireless-Controller-1]clock timezone BJ add 08:00:00

# åˆ›å»ºç®¡ç†ç”¨æˆ·
[Wireless-Controller-1]aaa
[Wireless-Controller-1-aaa]local-user admin password cipher Huawei@123
[Wireless-Controller-1-aaa]local-user admin privilege level 15
[Wireless-Controller-1-aaa]local-user admin service-type ssh web terminal
[Wireless-Controller-1-aaa]quit

# é…ç½®SSHå’ŒWebç®¡ç†
[Wireless-Controller-1]user-interface vty 0 4
[Wireless-Controller-1-ui-vty0-4]authentication-mode aaa
[Wireless-Controller-1-ui-vty0-4]protocol inbound ssh
[Wireless-Controller-1-ui-vty0-4]quit

[Wireless-Controller-1]rsa local-key-pair create
[Wireless-Controller-1]ssh server enable
[Wireless-Controller-1]stelnet server enable

[Wireless-Controller-1]web-manager enable
[Wireless-Controller-1]web-manager port 8443
```

**æ­¥éª¤2ï¼šåˆ›å»ºVLAN**

```cli
[Wireless-Controller-1]vlan batch 10 500 600

[Wireless-Controller-1]vlan 10
[Wireless-Controller-1-vlan10]description Management
[Wireless-Controller-1-vlan10]quit

[Wireless-Controller-1]vlan 500
[Wireless-Controller-1-vlan500]description Guest-Wireless
[Wireless-Controller-1-vlan500]quit

[Wireless-Controller-1]vlan 600
[Wireless-Controller-1-vlan600]description Office-Wireless
[Wireless-Controller-1-vlan600]quit
```

**æ­¥éª¤3ï¼šé…ç½®æ¥å£**

```cli
# é…ç½®ç®¡ç†æ¥å£
[Wireless-Controller-1]interface vlanif 10
[Wireless-Controller-1-Vlanif10]ip address 192.168.10.50 24
[Wireless-Controller-1-Vlanif10]quit

# é…ç½®è®¿å®¢æ— çº¿ç½‘ç»œæ¥å£
[Wireless-Controller-1]interface vlanif 500
[Wireless-Controller-1-Vlanif500]ip address 192.168.50.1 24
[Wireless-Controller-1-Vlanif500]dhcp select relay
[Wireless-Controller-1-Vlanif500]dhcp relay server-ip 192.168.10.100
[Wireless-Controller-1-Vlanif500]quit

# é…ç½®åŠå…¬æ— çº¿ç½‘ç»œæ¥å£
[Wireless-Controller-1]interface vlanif 600
[Wireless-Controller-1-Vlanif600]ip address 192.168.60.1 24
[Wireless-Controller-1-Vlanif600]dhcp select relay
[Wireless-Controller-1-Vlanif600]dhcp relay server-ip 192.168.10.100
[Wireless-Controller-1-Vlanif600]quit

# é…ç½®ç‰©ç†æ¥å£
[Wireless-Controller-1]interface gigabitethernet 0/0/1
[Wireless-Controller-1-GigabitEthernet0/0/1]description Link-to-Core-Switch
[Wireless-Controller-1-GigabitEthernet0/0/1]port link-type trunk
[Wireless-Controller-1-GigabitEthernet0/0/1]port trunk allow-pass vlan 10 500 600
[Wireless-Controller-1-GigabitEthernet0/0/1]quit
```

**æ­¥éª¤4ï¼šé…ç½®æ— çº¿å°„é¢‘æ¨¡æ¿**

```cli
# åˆ›å»º2.4GHzå°„é¢‘æ¨¡æ¿
[Wireless-Controller-1]wlan
[Wireless-Controller-1-wlan-view]radio-2g-profile name default_radio_2g
[Wireless-Controller-1-wlan-radio-2g-prof-default_radio_2g]channel-width 40
[Wireless-Controller-1-wlan-radio-2g-prof-default_radio_2g]channel auto
[Wireless-Controller-1-wlan-radio-2g-prof-default_radio_2g]power auto
[Wireless-Controller-1-wlan-radio-2g-prof-default_radio_2g]quit

# åˆ›å»º5GHzå°„é¢‘æ¨¡æ¿
[Wireless-Controller-1-wlan-view]radio-5g-profile name default_radio_5g
[Wireless-Controller-1-wlan-radio-5g-prof-default_radio_5g]channel-width 80
[Wireless-Controller-1-wlan-radio-5g-prof-default_radio_5g]channel auto
[Wireless-Controller-1-wlan-radio-5g-prof-default_radio_5g]power auto
[Wireless-Controller-1-wlan-radio-5g-prof-default_radio_5g]quit
```

**æ­¥éª¤5ï¼šé…ç½®SSIDå’Œå®‰å…¨æ¨¡æ¿**

```cli
# åˆ›å»ºåŠå…¬SSIDå®‰å…¨æ¨¡æ¿
[Wireless-Controller-1-wlan-view]security-profile name office_security
[Wireless-Controller-1-wlan-sec-prof-office_security]security wpa-wpa2 psk pass-phrase Huawei@2024 aes
[Wireless-Controller-1-wlan-sec-prof-office_security]quit

# åˆ›å»ºè®¿å®¢SSIDå®‰å…¨æ¨¡æ¿
[Wireless-Controller-1-wlan-view]security-profile name guest_security
[Wireless-Controller-1-wlan-sec-prof-guest_security]security wpa2 psk pass-phrase Guest@123 aes
[Wireless-Controller-1-wlan-sec-prof-guest_security]quit

# åˆ›å»ºåŠå…¬SSIDæ¨¡æ¿
[Wireless-Controller-1-wlan-view]ssid-profile name office_ssid
[Wireless-Controller-1-wlan-ssid-prof-office_ssid]ssid Office-WiFi
[Wireless-Controller-1-wlan-ssid-prof-office_ssid]quit

# åˆ›å»ºè®¿å®¢SSIDæ¨¡æ¿
[Wireless-Controller-1-wlan-view]ssid-profile name guest_ssid
[Wireless-Controller-1-wlan-ssid-prof-guest_ssid]ssid Guest-WiFi
[Wireless-Controller-1-wlan-ssid-prof-guest_ssid]quit
```

**æ­¥éª¤6ï¼šåˆ›å»ºVAPæ¨¡æ¿**

```cli
# åˆ›å»ºåŠå…¬VAPæ¨¡æ¿
[Wireless-Controller-1-wlan-view]vap-profile name office_vap
[Wireless-Controller-1-wlan-vap-prof-office_vap]forward-mode tunnel
[Wireless-Controller-1-wlan-vap-prof-office_vap]service-vlan vlan-id 600
[Wireless-Controller-1-wlan-vap-prof-office_vap]ssid-profile office_ssid
[Wireless-Controller-1-wlan-vap-prof-office_vap]security-profile office_security
[Wireless-Controller-1-wlan-vap-prof-office_vap]quit

# åˆ›å»ºè®¿å®¢VAPæ¨¡æ¿
[Wireless-Controller-1-wlan-view]vap-profile name guest_vap
[Wireless-Controller-1-wlan-vap-prof-guest_vap]forward-mode tunnel
[Wireless-Controller-1-wlan-vap-prof-guest_vap]service-vlan vlan-id 500
[Wireless-Controller-1-wlan-vap-prof-guest_vap]ssid-profile guest_ssid
[Wireless-Controller-1-wlan-vap-prof-guest_vap]security-profile guest_security
[Wireless-Controller-1-wlan-vap-prof-guest_vap]quit
```

**æ­¥éª¤7ï¼šåˆ›å»ºAPç»„å’ŒAPæ¨¡æ¿**

```cli
# åˆ›å»ºAPç»„
[Wireless-Controller-1-wlan-view]ap-group name default_ap_group
[Wireless-Controller-1-wlan-ap-group-default_ap_group]quit

# åˆ›å»ºAPæ¨¡æ¿
[Wireless-Controller-1-wlan-view]ap-profile name default_ap_profile
[Wireless-Controller-1-wlan-ap-prof-default_ap_profile]radio 0 radio-profile default_radio_2g
[Wireless-Controller-1-wlan-ap-prof-default_ap_profile]radio 0 vap-profile office_vap wlan 1
[Wireless-Controller-1-wlan-ap-prof-default_ap_profile]radio 0 vap-profile guest_vap wlan 2
[Wireless-Controller-1-wlan-ap-prof-default_ap_profile]radio 1 radio-profile default_radio_5g
[Wireless-Controller-1-wlan-ap-prof-default_ap_profile]radio 1 vap-profile office_vap wlan 1
[Wireless-Controller-1-wlan-ap-prof-default_ap_profile]radio 1 vap-profile guest_vap wlan 2
[Wireless-Controller-1-wlan-ap-prof-default_ap_profile]quit

# å°†APæ¨¡æ¿åº”ç”¨åˆ°APç»„
[Wireless-Controller-1-wlan-view]ap-group name default_ap_group
[Wireless-Controller-1-wlan-ap-group-default_ap_group]ap-profile default_ap_profile
[Wireless-Controller-1-wlan-ap-group-default_ap_group]quit
```

**æ­¥éª¤8ï¼šé…ç½®AP**

```cli
# é…ç½®ä¸€æ¥¼AP
[Wireless-Controller-1-wlan-view]ap auth-mode mac-auth
[Wireless-Controller-1-wlan-view]ap-id 1 ap-mac 00e0-fc12-3456
[Wireless-Controller-1-wlan-ap-1]ap-name AP-1F-Office-1
[Wireless-Controller-1-wlan-ap-1]ap-group default_ap_group
[Wireless-Controller-1-wlan-ap-1]quit

[Wireless-Controller-1-wlan-view]ap-id 2 ap-mac 00e0-fc12-3457
[Wireless-Controller-1-wlan-ap-2]ap-name AP-1F-Office-2
[Wireless-Controller-1-wlan-ap-2]ap-group default_ap_group
[Wireless-Controller-1-wlan-ap-2]quit

# ç»§ç»­é…ç½®å…¶ä»–æ¥¼å±‚APï¼ˆç¤ºä¾‹ï¼‰
[Wireless-Controller-1-wlan-view]ap-id 3 ap-mac 00e0-fc12-3458
[Wireless-Controller-1-wlan-ap-3]ap-name AP-2F-Office-1
[Wireless-Controller-1-wlan-ap-3]ap-group default_ap_group
[Wireless-Controller-1-wlan-ap-3]quit

[Wireless-Controller-1-wlan-view]quit
```

**æ­¥éª¤9ï¼šé…ç½®CAPWAP**

```cli
# é…ç½®CAPWAPæºæ¥å£
[Wireless-Controller-1]capwap source interface vlanif 10
```

**æ­¥éª¤10ï¼šä¿å­˜é…ç½®**

```cli
[Wireless-Controller-1]save
```

## ç¬¬å…«é˜¶æ®µï¼šDHCPæœåŠ¡å™¨é…ç½®

### 8.1 DHCPæœåŠ¡å™¨é…ç½®

### è®¾å¤‡ä¿¡æ¯

* **æœåŠ¡å™¨IP**ï¼š192.168.10.100/24
* **æ“ä½œç³»ç»Ÿ**ï¼šLinux
* **è§’è‰²**ï¼šDHCPæœåŠ¡å™¨

### é…ç½®æ­¥éª¤

**æ­¥éª¤1ï¼šå®‰è£…DHCPæœåŠ¡**

```bash
# CentOS/RHELç³»ç»Ÿ
sudo yum install dhcp -y

# Ubuntu/Debianç³»ç»Ÿ
sudo apt-get install isc-dhcp-server -y
```

**æ­¥éª¤2ï¼šé…ç½®DHCPæœåŠ¡**

```conf
# ç¼–è¾‘DHCPé…ç½®æ–‡ä»¶
sudo vi /etc/dhcp/dhcpd.conf

# æ·»åŠ ä»¥ä¸‹é…ç½®å†…å®¹ï¼š
# å…¨å±€é…ç½®
default-lease-time 86400;
max-lease-time 172800;
authoritative;

# DNSæœåŠ¡å™¨
option domain-name-servers 114.114.114.114, 8.8.8.8;
option ntp-servers 192.168.10.1;

# ä¸€æ¥¼åŠå…¬åŒºDHCPæ± 
subnet 192.168.100.0 netmask 255.255.255.0 {
    range 192.168.100.10 192.168.100.200;
    option routers 192.168.100.254;
    option broadcast-address 192.168.100.255;
    default-lease-time 86400;
    max-lease-time 172800;
}

# äºŒæ¥¼åŠå…¬åŒºDHCPæ± 
subnet 192.168.101.0 netmask 255.255.255.0 {
    range 192.168.101.10 192.168.101.200;
    option routers 192.168.101.254;
    option broadcast-address 192.168.101.255;
    default-lease-time 86400;
    max-lease-time 172800;
}

# è®¿å®¢æ— çº¿ç½‘ç»œDHCPæ± 
subnet 192.168.50.0 netmask 255.255.255.0 {
    range 192.168.50.10 192.168.50.200;
    option routers 192.168.50.254;
    option broadcast-address 192.168.50.255;
    default-lease-time 3600;
    max-lease-time 7200;
}

# åŠå…¬æ— çº¿ç½‘ç»œDHCPæ± 
subnet 192.168.60.0 netmask 255.255.255.0 {
    range 192.168.60.10 192.168.60.200;
    option routers 192.168.60.254;
    option broadcast-address 192.168.60.255;
    default-lease-time 86400;
    max-lease-time 172800;
}
```

**æ­¥éª¤3ï¼šå¯åŠ¨DHCPæœåŠ¡**

```bash
# å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯
sudo systemctl start dhcpd
sudo systemctl enable dhcpd

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status dhcpd
```

## ç¬¬ä¹é˜¶æ®µï¼šç½‘ç»œç®¡ç†å¹³å°é…ç½®

### 9.1 eSightç½‘ç®¡å¹³å°é…ç½®

### é…ç½®æ­¥éª¤

**æ­¥éª¤1ï¼šå®‰è£…eSight**

```
# åœ¨ç®¡ç†æœåŠ¡å™¨ä¸Šå®‰è£…eSight
# æŒ‰ç…§åä¸ºeSightå®‰è£…æŒ‡å—è¿›è¡Œå®‰è£…
```

**æ­¥éª¤2ï¼šæ·»åŠ è®¾å¤‡**

```
# é€šè¿‡Webç•Œé¢æ·»åŠ è®¾å¤‡
# è®¿é—® https://192.168.10.101:8443
# ä½¿ç”¨admin/Huawei@123ç™»å½•

# æ·»åŠ æ ¸å¿ƒäº¤æ¢æœº
è®¾å¤‡IPï¼š192.168.10.11
SNMPå›¢ä½“åï¼špublic
è®¾å¤‡ç±»å‹ï¼šäº¤æ¢æœº

# æ·»åŠ è·¯ç”±å™¨
è®¾å¤‡IPï¼š192.168.10.1
SNMPå›¢ä½“åï¼špublic
è®¾å¤‡ç±»å‹ï¼šè·¯ç”±å™¨

# æ·»åŠ é˜²ç«å¢™
è®¾å¤‡IPï¼š192.168.10.20
SNMPå›¢ä½“åï¼špublic
è®¾å¤‡ç±»å‹ï¼šé˜²ç«å¢™
```

## ç¬¬åé˜¶æ®µï¼šé…ç½®éªŒè¯å’Œæµ‹è¯•

### 10.1 ç½‘ç»œè¿é€šæ€§æµ‹è¯•

**æ­¥éª¤1ï¼šåŸºç¡€è¿é€šæ€§æµ‹è¯•**

```cli
# åœ¨æ ¸å¿ƒäº¤æ¢æœºä¸Šæµ‹è¯•
[Core-Switch-1]ping 192.168.10.12  # æµ‹è¯•åˆ°Core-Switch-2
[Core-Switch-1]ping 192.168.10.1   # æµ‹è¯•åˆ°Router-1
[Core-Switch-1]ping 192.168.10.21  # æµ‹è¯•åˆ°Agg-Switch-1F-1

# åœ¨è·¯ç”±å™¨ä¸Šæµ‹è¯•
[Router-1]ping 8.8.8.8  # æµ‹è¯•å¤–ç½‘è¿é€šæ€§
[Router-1]ping 192.168.10.11  # æµ‹è¯•åˆ°æ ¸å¿ƒäº¤æ¢æœº
```

**æ­¥éª¤2ï¼šVLANé—´è·¯ç”±æµ‹è¯•**

```cli
# ä»åŠå…¬åŒºæµ‹è¯•åˆ°å…¶ä»–VLAN
ping 192.168.101.1  # æµ‹è¯•VLANé—´è·¯ç”±
ping 192.168.200.1  # æµ‹è¯•åˆ°ä¼šè®®å®¤VLAN
ping 8.8.8.8        # æµ‹è¯•å¤–ç½‘è®¿é—®
```

**æ­¥éª¤3ï¼šDHCPåŠŸèƒ½æµ‹è¯•**

```bash
# åœ¨å®¢æˆ·ç«¯æµ‹è¯•DHCP
ipconfig /release
ipconfig /renew
ipconfig /all  # æŸ¥çœ‹è·å–çš„IPåœ°å€
```

**æ­¥éª¤4ï¼šæ— çº¿ç½‘ç»œæµ‹è¯•**

```
# æµ‹è¯•æ— çº¿è¿æ¥
# è¿æ¥Office-WiFi SSID
# å¯†ç ï¼šHuawei@2024
# æµ‹è¯•ç½‘ç»œè¿é€šæ€§
```

### 10.2 æ•…éšœåˆ‡æ¢æµ‹è¯•

**æ­¥éª¤1ï¼šVRRPåˆ‡æ¢æµ‹è¯•**

```cli
# åœ¨Core-Switch-1ä¸Šå…³é—­VLANIFæ¥å£
[Core-Switch-1]interface vlanif 100
[Core-Switch-1-Vlanif100]shutdown
[Core-Switch-1-Vlanif100]quit

# åœ¨å®¢æˆ·ç«¯æµ‹è¯•ç½‘å…³æ˜¯å¦åˆ‡æ¢åˆ°Core-Switch-2
ping 192.168.100.254

# æ¢å¤æ¥å£
[Core-Switch-1]interface vlanif 100
[Core-Switch-1-Vlanif100]undo shutdown
[Core-Switch-1-Vlanif100]quit
```

**æ­¥éª¤2ï¼šé“¾è·¯å†—ä½™æµ‹è¯•**

```
# æ–­å¼€ä¸»é“¾è·¯ï¼Œæµ‹è¯•å¤‡ç”¨é“¾è·¯æ˜¯å¦ç”Ÿæ•ˆ
# è§‚å¯ŸSTPæ”¶æ•›æ—¶é—´
# æµ‹è¯•ç½‘ç»œè¿é€šæ€§æ¢å¤æƒ…å†µ
```

# å››. è¿ç»´ä¸æ£€æŸ¥

## é…ç½®éƒ¨ç½²æ³¨æ„äº‹é¡¹

### å®‰å…¨æ³¨æ„äº‹é¡¹

1. **å¯†ç å®‰å…¨**ï¼šæ‰€æœ‰è®¾å¤‡ä½¿ç”¨å¼ºå¯†ç ï¼Œå®šæœŸæ›´æ¢
2. **è®¿é—®æ§åˆ¶**ï¼šé™åˆ¶ç®¡ç†è®¿é—®æ¥æºIP
3. **SNMPå®‰å…¨**ï¼šä½¿ç”¨SNMPv3æˆ–æ›´æ”¹é»˜è®¤å›¢ä½“å
4. **å›ºä»¶æ›´æ–°**ï¼šåŠæ—¶æ›´æ–°è®¾å¤‡å›ºä»¶å’Œå®‰å…¨è¡¥ä¸

### é…ç½®å¤‡ä»½

1. **å®šæœŸå¤‡ä»½**ï¼šæ¯å‘¨å¤‡ä»½æ‰€æœ‰è®¾å¤‡é…ç½®
2. **ç‰ˆæœ¬ç®¡ç†**ï¼šè®°å½•é…ç½®å˜æ›´å†å²
3. **æ¢å¤æµ‹è¯•**ï¼šå®šæœŸæµ‹è¯•é…ç½®æ¢å¤æµç¨‹

### ç›‘æ§å‘Šè­¦

1. **æ€§èƒ½ç›‘æ§**ï¼šç›‘æ§è®¾å¤‡CPUã€å†…å­˜ã€æ¥å£åˆ©ç”¨ç‡
2. **æ•…éšœå‘Šè­¦**ï¼šé…ç½®è®¾å¤‡æ•…éšœã€é“¾è·¯ä¸­æ–­å‘Šè­¦
3. **å®‰å…¨ç›‘æ§**ï¼šç›‘æ§å¼‚å¸¸è®¿é—®å’Œå®‰å…¨äº‹ä»¶

### æ–‡æ¡£ç»´æŠ¤

1. **é…ç½®æ–‡æ¡£**ï¼šåŠæ—¶æ›´æ–°é…ç½®æ–‡æ¡£
2. **ç½‘ç»œæ‹“æ‰‘**ï¼šä¿æŒæ‹“æ‰‘å›¾ä¸å®é™…ä¸€è‡´
3. **æ“ä½œè®°å½•**ï¼šè®°å½•æ‰€æœ‰é…ç½®å˜æ›´æ“ä½œ

## æ•…éšœæ’é™¤æŒ‡å—

### å¸¸è§é—®é¢˜å¤„ç†

**é—®é¢˜1ï¼šè®¾å¤‡æ— æ³•SSHç™»å½•**

```cli
# æ£€æŸ¥SSHæœåŠ¡çŠ¶æ€
display ssh server status

# é‡æ–°ç”Ÿæˆå¯†é’¥
rsa local-key-pair create

# æ£€æŸ¥ç”¨æˆ·é…ç½®
display aaa local-user
```

**é—®é¢˜2ï¼šVLANé—´æ— æ³•é€šä¿¡**

```cli
# æ£€æŸ¥VLANIFæ¥å£çŠ¶æ€
display interface vlanif brief

# æ£€æŸ¥è·¯ç”±è¡¨
display ip routing-table

# æ£€æŸ¥OSPFé‚»å±…
display ospf peer
```

**é—®é¢˜3ï¼šDHCPå®¢æˆ·ç«¯æ— æ³•è·å–IP**

```bash
# æ£€æŸ¥DHCPä¸­ç»§é…ç½®
display dhcp relay server-group

# æ£€æŸ¥DHCPæœåŠ¡å™¨çŠ¶æ€
sudo systemctl status dhcpd

# æŸ¥çœ‹DHCPæ—¥å¿—
sudo tail -f /var/log/dhcpd.log
```

**é—®é¢˜4ï¼šæ— çº¿å®¢æˆ·ç«¯æ— æ³•è¿æ¥**

```cli
# æ£€æŸ¥APçŠ¶æ€
[Wireless-Controller-1-wlan-view]display ap all

# æ£€æŸ¥VAPçŠ¶æ€
[Wireless-Controller-1-wlan-view]display vap all

# æ£€æŸ¥SSIDé…ç½®
[Wireless-Controller-1-wlan-view]display ssid-profile all
```

## é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•

### è®¾å¤‡é…ç½®æ£€æŸ¥

- [X]  æ‰€æœ‰è®¾å¤‡åŸºç¡€é…ç½®å®Œæˆ
- [X]  ç®¡ç†IPåœ°å€é…ç½®æ­£ç¡®
- [X]  SSHè®¿é—®æ­£å¸¸
- [X]  SNMPé…ç½®å®Œæˆ
- [X]  æ—¶é—´åŒæ­¥é…ç½®

### ç½‘ç»œåŠŸèƒ½æ£€æŸ¥

- [X]  VLANåˆ›å»ºå’Œé…ç½®
- [X]  VLANIFæ¥å£é…ç½®
- [X]  è·¯ç”±åè®®é…ç½®
- [X]  VRRPå†—ä½™é…ç½®
- [X]  STPé…ç½®

### å®‰å…¨åŠŸèƒ½æ£€æŸ¥

- [X]  é˜²ç«å¢™ç­–ç•¥é…ç½®
- [X]  ACLè®¿é—®æ§åˆ¶
- [X]  ç«¯å£å®‰å…¨é…ç½®
- [X]  DHCP Snoopingé…ç½®

### æ— çº¿ç½‘ç»œæ£€æŸ¥

- [X]  æ— çº¿æ§åˆ¶å™¨é…ç½®
- [X]  APæ³¨å†Œå’Œä¸Šçº¿
- [X]  SSIDå¹¿æ’­æ­£å¸¸
- [X]  æ— çº¿å®¢æˆ·ç«¯è¿æ¥æµ‹è¯•

### æœåŠ¡åŠŸèƒ½æ£€æŸ¥

- [X]  DHCPæœåŠ¡æ­£å¸¸
- [X]  DNSè§£ææ­£å¸¸
- [X]  NTPæ—¶é—´åŒæ­¥
- [X]  ç½‘ç®¡å¹³å°ç›‘æ§

### è¿é€šæ€§æµ‹è¯•

- [X]  å†…ç½‘è¿é€šæ€§æµ‹è¯•
- [X]  VLANé—´è·¯ç”±æµ‹è¯•
- [X]  å¤–ç½‘è®¿é—®æµ‹è¯•
- [X]  æ— çº¿ç½‘ç»œæµ‹è¯•

### å†—ä½™æµ‹è¯•

- [X]  VRRPåˆ‡æ¢æµ‹è¯•
- [X]  é“¾è·¯æ•…éšœåˆ‡æ¢æµ‹è¯•
- [X]  è®¾å¤‡æ•…éšœåˆ‡æ¢æµ‹è¯•

---

**é…ç½®éƒ¨ç½²å®Œæˆåï¼Œè¯·ç¡®ä¿æ‰€æœ‰æ£€æŸ¥é¡¹ç›®éƒ½å·²é€šè¿‡éªŒè¯ï¼Œå¹¶åŠæ—¶ä¿å­˜æ‰€æœ‰è®¾å¤‡é…ç½®ã€‚**